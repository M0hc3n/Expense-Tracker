{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/TRETEC/Desktop/Software Engineering/Tp/code/Expense Tracker Website/light-bootstrap-dashboard-react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/TRETEC/Desktop/Software Engineering/Tp/code/Expense Tracker Website/light-bootstrap-dashboard-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/TRETEC/Desktop/Software Engineering/Tp/code/Expense Tracker Website/light-bootstrap-dashboard-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState}from\"react\";// react-bootstrap components\nimport{Button,Card,Form,Container,Row,Col,Dropdown}from\"react-bootstrap\";import{AuthContext}from\"../context/AuthContext\";import{addDoc,collection,doc,updateDoc}from\"firebase/firestore\";import{db}from\"../database/firebase\";import{v4 as uuidv4}from\"uuid\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function User(){var _useContext=useContext(AuthContext),currentUser=_useContext.currentUser,userInfo=_useContext.userInfo;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),successfullCreation=_useState2[0],setSuccessfullCreation=_useState2[1];// this part of updating the profile\nvar _useState3=useState(userInfo.userName),_useState4=_slicedToArray(_useState3,2),userName=_useState4[0],setUserName=_useState4[1];var _useState5=useState(userInfo.email),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=useState(userInfo.fullName),_useState8=_slicedToArray(_useState7,2),fullName=_useState8[0],setFullName=_useState8[1];var _useState9=useState(userInfo.city),_useState10=_slicedToArray(_useState9,2),city=_useState10[0],setCity=_useState10[1];var _useState11=useState(userInfo.country),_useState12=_slicedToArray(_useState11,2),country=_useState12[0],setCountry=_useState12[1];var _useState13=useState(userInfo.income),_useState14=_slicedToArray(_useState13,2),income=_useState14[0],setIncome=_useState14[1];// this part of adding a new sub user\nvar _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),subUserIncome=_useState16[0],setSubUserIncome=_useState16[1];var _useState17=useState(\"Child\"),_useState18=_slicedToArray(_useState17,2),selectedOption=_useState18[0],setSelectedOption=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),subUserCode=_useState20[0],setSubUserCode=_useState20[1];var handleUpdate=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var userRef;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();userRef=doc(db,\"users\",currentUser.uid);_context.prev=2;_context.next=5;return updateDoc(userRef,{userName:userName,fullName:fullName,photoURL:userInfo.photoURL,email:email,city:city,country:country,uid:currentUser.uid});case 5:_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](2);console.log(_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[2,7]]);}));return function handleUpdate(_x){return _ref.apply(this,arguments);};}();var handleChange=function handleChange(e){setSelectedOption(e.target.value);};var handleAddingSubUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var subUserCodeTemp;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:e.preventDefault();subUserCodeTemp=uuidv4();_context2.prev=2;setSubUserCode(subUserCodeTemp);_context2.next=6;return addDoc(collection(db,'users'),{user_id:currentUser.uid,is_sub_user:true,income:subUserIncome,sub_user_code:subUserCodeTemp,type:selectedOption,activated:false});case 6:setSuccessfullCreation(true);_context2.next=14;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](2);console.log(_context2.t0);setErr(true);setLoading(false);case 14:case\"end\":return _context2.stop();}},_callee2,null,[[2,9]]);}));return function handleAddingSubUser(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Container,{fluid:true,children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:\"7\",children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsx(Card.Title,{as:\"h4\",children:\"Edit Profile\"})}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Form,{onSubmit:function onSubmit(e){return handleUpdate(e);},children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{className:\" px-1 ml-2\",md:\"3\",children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username\"}),/*#__PURE__*/_jsx(Form.Control,{value:userName,placeholder:userInfo.userName,onChange:function onChange(e){return setUserName(e.target.value);},type:\"text\"})]})}),/*#__PURE__*/_jsx(Col,{className:\"pl-1\",md:\"4\",children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputEmail1\",children:\"Email address\"}),/*#__PURE__*/_jsx(Form.Control,{placeholder:userInfo.email,value:email,onChange:function onChange(e){return setEmail(e.target.value);},type:\"email\"})]})})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{className:\"pr-1\",md:\"6\",children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Full Name\"}),/*#__PURE__*/_jsx(Form.Control,{placeholder:userInfo.fullName,value:fullName,onChange:function onChange(e){return setFullName(e.target.value);},type:\"text\"})]})}),/*#__PURE__*/_jsx(Col,{className:\"pr-1\",md:\"6\",children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Income\"}),/*#__PURE__*/_jsx(Form.Control,{placeholder:userInfo.income,value:income,onChange:function onChange(e){return setIncome(e.target.value);},type:\"number\"})]})})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{className:\"pr-1\",md:\"4\",children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"City\"}),/*#__PURE__*/_jsx(Form.Control,{placeholder:userInfo.city,value:city,onChange:function onChange(e){return setCity(e.target.value);},type:\"text\"})]})}),/*#__PURE__*/_jsx(Col,{className:\"px-1\",md:\"4\",children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Country\"}),/*#__PURE__*/_jsx(Form.Control,{placeholder:userInfo.country,value:country,onChange:function onChange(e){return setCountry(e.target.value);},type:\"text\"})]})})]}),/*#__PURE__*/_jsx(Button,{className:\"btn-fill pull-right mt-1\",type:\"submit\",variant:\"info\",children:\"Update Profile\"}),/*#__PURE__*/_jsx(\"div\",{className:\"clearfix\"})]})})]})}),/*#__PURE__*/_jsx(Col,{md:\"4\",children:/*#__PURE__*/_jsx(Card,{className:\"card-user\",children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"author mt-3\",children:[/*#__PURE__*/_jsxs(\"a\",{href:\"#pablo\",onClick:function onClick(e){return e.preventDefault();},children:[/*#__PURE__*/_jsx(\"img\",{alt:\"...\",className:\"avatar border-gray\",src:userInfo.photoURL}),/*#__PURE__*/_jsx(\"h5\",{className:\"title\",children:userInfo.fullName})]}),/*#__PURE__*/_jsx(\"p\",{className:\"description\",children:userInfo.userName})]})})})})]}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:\"10\",children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsx(Card.Title,{as:\"h4\",children:\"Create a Subuser\"})}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Form,{onSubmit:function onSubmit(e){return handleUpdate(e);},children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{className:\"pr-1\",md:\"6\",children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Income\"}),/*#__PURE__*/_jsx(Form.Control,{value:subUserIncome,onChange:function onChange(e){return setSubUserIncome(e.target.value);},type:\"number\"})]})}),/*#__PURE__*/_jsx(Col,{className:\"pl-1\",md:\"6\",children:/*#__PURE__*/_jsxs(Dropdown,{className:\"d-flex form-select flex-column ml-2 my-2 h-25\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"dropdown\",children:\"Relative\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"dropdown\",className:\"form-control\",onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Child\",children:\"Child\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Husband\",children:\"Husband\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Wife\",children:\"Wife\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Friend\",children:\"Friend\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Relative\",children:\"Relative\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Other\",children:\"Other\"})]})]})})]}),/*#__PURE__*/_jsx(Button,{className:\"btn-fill pull-right mt-1\",type:\"submit\",variant:\"info\",onClick:handleAddingSubUser,children:\"Create a new Subuser\"}),successfullCreation&&/*#__PURE__*/_jsxs(\"div\",{className:\"clearfix mt-2\",children:[\"Provide the sub-user with this code \",/*#__PURE__*/_jsx(\"span\",{className:\"text-success\",children:subUserCode})]})]})})]})})})]})});}export default User;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}