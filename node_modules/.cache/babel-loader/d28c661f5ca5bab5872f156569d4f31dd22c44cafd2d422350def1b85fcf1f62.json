{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/TRETEC/Desktop/Software Engineering/Tp/code/Expense Tracker Website/light-bootstrap-dashboard-react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/TRETEC/Desktop/Software Engineering/Tp/code/Expense Tracker Website/light-bootstrap-dashboard-react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/TRETEC/Desktop/Software Engineering/Tp/code/Expense Tracker Website/light-bootstrap-dashboard-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/TRETEC/Desktop/Software Engineering/Tp/code/Expense Tracker Website/light-bootstrap-dashboard-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{onAuthStateChanged}from\"firebase/auth\";import{createContext,useState,useEffect}from\"react\";import{auth}from\"../database/firebase\";import{collection,query,where,getDocs}from\"firebase/firestore\";import{db}from\"database/firebase\";import{jsx as _jsx}from\"react/jsx-runtime\";export var AuthContext=/*#__PURE__*/createContext();export var AuthContextProvider=function AuthContextProvider(_ref){var children=_ref.children;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),currentUser=_useState2[0],setCurrentUser=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),userInfo=_useState4[0],setUserInfo=_useState4[1];useEffect(function(){var unsub=onAuthStateChanged(auth,/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(user){var q,querySnapshot;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setCurrentUser(user);if(user.uid){q=query(collection(db,\"users\"),where(\"uid\",\"==\",user.uid));}else{q=query(collection(db,\"users\"),where('is_sub_user','==',true),where('email','==',user.email));}_context.next=4;return getDocs(q);case 4:querySnapshot=_context.sent;// render info of the user            \nquerySnapshot.forEach(function(doc){var document_data=doc.data();setUserInfo(_objectSpread(_objectSpread({},document_data),{},{document_id:doc.id}));});case 6:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}());// clean-up function to avoid memory leakage\nreturn function(){unsub();};},[]);return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{currentUser:currentUser,userInfo:userInfo},children:children});};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}